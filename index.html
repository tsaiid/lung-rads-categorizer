<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Lung RADS</title>

    <link href="dist/semantic.css" rel="stylesheet" type="text/css" />
</head>

<body>
    <div class="ui grid">
        <div class="eight wide column">

            <h4 class="ui block top attached header">Pulmonary Nodule</h4>
            <div class="ui bottom attached secondary segment">


                <div class="ui large form segment">
                    <div class="field">
                        <label>Size</label>

                        <div class="ui right labeled input">
                            <input type="text" id="size" placeholder="">
                            <div class="ui label">
                                mm
                            </div>
                        </div>
                    </div>

                    <div class="field" id="texture">
                        <label>Texture</label>
                        <div class="grouped inline fields">
                            <div class="field">
                                <div class="ui radio checkbox">
                                    <input type="radio" name="texture" value="s">
                                    <label>Solid</label>
                                </div>
                            </div>
                            <div class="field">
                                <div class="ui radio checkbox">
                                    <input type="radio" name="texture" value="ps">
                                    <label>Part solid</label>
                                </div>
                            </div>
                            <div class="field">
                                <div class="ui radio checkbox">
                                    <input type="radio" name="texture" value="ns">
                                    <label>Non-solid</label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="field" id="others">
                        <label>New</label>

                        <div class="grouped inline fields">
                            <div class="field">
                                <div class="ui radio checkbox">
                                    <input type="radio" name="others" value="new">
                                    <label>New</label>
                                </div>
                            </div>
                            <div class="field">
                                <div class="ui radio checkbox">
                                    <input type="radio" name="others" value="growing">
                                    <label>Growing</label>
                                </div>
                            </div>
                            <div class="field">
                                <div class="ui radio checkbox">
                                    <input type="radio" name="others" value="no_change">
                                    <label>No Change</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="eight wide column">

            <div class="ui circular segment">
                <div class="ui statistic">
                    <div class="value" id="lung_rads">
                        2
                    </div>
                    <div class="label">
                        Lung-RADS
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="dist/semantic.js" type="text/javascript"></script>

    <script type="text/javascript">
    function calculate_rads() {
      size = $('#size').val();
      lung_rads = ''
      texture = $('#texture:checked').val();
      others = $('#others:checked').val();

        if (size > 0) {
          if (texture.length > 0) {
            if (texture == 's') {
              if ( (others == 'new' && size > 4) ||
                   size < 6) {
                lung_rads = '2';
              } else if ( (others == 'new' && (size >= 4 || size < 6)) ||
                          (size >= 6 || size < 8)) {
                lung_rads = '3';
              } else if ( (others == 'new' && (size >= 6 || size < 8)) ||
                          (others == 'growing' && size < 8) ||
                          (others == 'no_change' && size >= 8 || size < 15) ) {
                lung_rads = '4A';
              } else if ( size >= 15 ||
                          (others == 'new' || others == 'growing' && size >= 8) ) {
                lung_rads = '4B';
              }
            } else if (texture == 'ps') {
              if ( others == 'no_change' && size < 6 ) {
                lung_rads = '2';
              } else if ( 1 )
            } else {
              if ( size < 20 ||
                  (size >= 20 && others == 'no_change') ) {
                lung_rads = '2';
              } else if ( others == 'new' && size >= 20 ) {
                lung_rads = '3';
              }
            }
          }
        } else {
            //alert($('#size').val());
            //validationRules = $('.form').form('get validation', 'size')
            //alert($.fn.form.settings.rules);
        }
    }

    $('.ui.form')
        .form({
            size: {
                identifier: 'size',
                rules: [{
                    type: 'integer',
                    prompt: '請輸入整數'
                }]
            },
            texture: {
                identifier: 'texture',
                rules: [{
                    type: 'checked',
                    prompt: '請選擇'
                }]
            },
            others: {
                identifier: 'others',
                rules: [{
                    type: 'checked',
                    prompt: '請選擇'
                }]
            }
        }, {
            inline: true,
            on: 'blur',
            onSuccess: function(){
              calculate_rads();
            }
        });

    $('.ui.checkbox')
        .checkbox({
            'onChange': function() {
                calculate_rads();
            }
        });
    </script>
</body>

</html>
